{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 40, "column": 0}, "map": {"version":3,"sources":["file:///C:/DevProjects/prospra/lib/supabase/server.ts"],"sourcesContent":["import { cookies } from \"next/headers\";\nimport { createServerClient, type CookieOptions } from \"@supabase/ssr\";\n\nexport async function createClient() {\n  const cookieStore = await cookies();\n\n  return createServerClient(\n    process.env.NEXT_PUBLIC_SUPABASE_URL!,\n    process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY!,\n    {\n      cookies: {\n        get(name: string) {\n          // Cast to any so TypeScript stops complaining about .get\n          const store: any = cookieStore;\n          const cookie = store.get(name);\n          return cookie?.value;\n        },\n        set(_name: string, _value: string, _options: CookieOptions) {\n          // No-op in App Router server context – Supabase just needs this shape\n        },\n        remove(_name: string, _options: CookieOptions) {\n          // Same here – required by Supabase, safe to leave empty on the server\n        },\n      },\n    }\n  );\n}\n"],"names":[],"mappings":";;;;AAAA;AACA;AAAA;;;AAEO,eAAe;IACpB,MAAM,cAAc,MAAM,IAAA,4IAAO;IAEjC,OAAO,IAAA,iMAAkB,sUAGvB;QACE,SAAS;YACP,KAAI,IAAY;gBACd,yDAAyD;gBACzD,MAAM,QAAa;gBACnB,MAAM,SAAS,MAAM,GAAG,CAAC;gBACzB,OAAO,QAAQ;YACjB;YACA,KAAI,KAAa,EAAE,MAAc,EAAE,QAAuB;YACxD,sEAAsE;YACxE;YACA,QAAO,KAAa,EAAE,QAAuB;YAC3C,sEAAsE;YACxE;QACF;IACF;AAEJ"}},
    {"offset": {"line": 72, "column": 0}, "map": {"version":3,"sources":["file:///C:/DevProjects/prospra/app/api/usage/route.ts"],"sourcesContent":["import { createClient } from \"@/lib/supabase/server\";\r\n\r\nexport async function GET() {\r\n  const supabase = await createClient();\r\n\r\n  const {\r\n    data: { user },\r\n  } = await supabase.auth.getUser();\r\n\r\n  if (!user) {\r\n    return new Response(JSON.stringify({ error: \"Unauthorized\" }), {\r\n      status: 401,\r\n    });\r\n  }\r\n\r\n  // Count today's messages\r\n  const { count } = await supabase\r\n    .from(\"messages\")\r\n    .select(\"*\", { count: \"exact\", head: true })\r\n    .eq(\"user_id\", user.id)\r\n    .gte(\r\n      \"created_at\",\r\n      new Date(new Date().setHours(0, 0, 0, 0)).toISOString()\r\n    );\r\n\r\n  // Fetch premium\r\n  const { data: profile } = await supabase\r\n    .from(\"profiles\")\r\n    .select(\"is_premium\")\r\n    .eq(\"id\", user.id)\r\n    .single();\r\n\r\n  const DAILY_LIMIT = profile?.is_premium ? Infinity : 15;\r\n\r\n  return Response.json({\r\n    used: count ?? 0,\r\n    limit: DAILY_LIMIT,\r\n    remaining: profile?.is_premium ? Infinity : Math.max(0, DAILY_LIMIT - (count ?? 0)),\r\n    isPremium: profile?.is_premium ?? false,\r\n  });\r\n}\n"],"names":[],"mappings":";;;;AAAA;;AAEO,eAAe;IACpB,MAAM,WAAW,MAAM,IAAA,2IAAY;IAEnC,MAAM,EACJ,MAAM,EAAE,IAAI,EAAE,EACf,GAAG,MAAM,SAAS,IAAI,CAAC,OAAO;IAE/B,IAAI,CAAC,MAAM;QACT,OAAO,IAAI,SAAS,KAAK,SAAS,CAAC;YAAE,OAAO;QAAe,IAAI;YAC7D,QAAQ;QACV;IACF;IAEA,yBAAyB;IACzB,MAAM,EAAE,KAAK,EAAE,GAAG,MAAM,SACrB,IAAI,CAAC,YACL,MAAM,CAAC,KAAK;QAAE,OAAO;QAAS,MAAM;IAAK,GACzC,EAAE,CAAC,WAAW,KAAK,EAAE,EACrB,GAAG,CACF,cACA,IAAI,KAAK,IAAI,OAAO,QAAQ,CAAC,GAAG,GAAG,GAAG,IAAI,WAAW;IAGzD,gBAAgB;IAChB,MAAM,EAAE,MAAM,OAAO,EAAE,GAAG,MAAM,SAC7B,IAAI,CAAC,YACL,MAAM,CAAC,cACP,EAAE,CAAC,MAAM,KAAK,EAAE,EAChB,MAAM;IAET,MAAM,cAAc,SAAS,aAAa,WAAW;IAErD,OAAO,SAAS,IAAI,CAAC;QACnB,MAAM,SAAS;QACf,OAAO;QACP,WAAW,SAAS,aAAa,WAAW,KAAK,GAAG,CAAC,GAAG,cAAc,CAAC,SAAS,CAAC;QACjF,WAAW,SAAS,cAAc;IACpC;AACF"}}]
}