{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///C:/DevProjects/prospra/lib/supabase/client.ts"],"sourcesContent":["import { createBrowserClient } from \"@supabase/ssr\";\n\n// This client syncs auth cookies correctly so API routes receive the session.\n// Without this, API routes ALWAYS return 401.\nexport function createClient() {\n  return createBrowserClient(\n    process.env.NEXT_PUBLIC_SUPABASE_URL!,\n    process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY!,\n    {\n      cookies: {\n        get(name) {\n          if (typeof document === \"undefined\") return null;\n          const match = document.cookie.match(new RegExp(\"(^| )\" + name + \"=([^;]+)\"));\n          return match ? match[2] : null;\n        },\n        set(name, value, options) {\n          if (typeof document === \"undefined\") return;\n          let cookie = `${name}=${value}; path=${options?.path ?? \"/\"};`;\n          if (options?.maxAge) cookie += ` max-age=${options.maxAge};`;\n          if (options?.sameSite) cookie += ` samesite=${options.sameSite};`;\n          if (options?.secure) cookie += \" secure;\";\n          document.cookie = cookie;\n        },\n        remove(name, options) {\n          if (typeof document === \"undefined\") return;\n          document.cookie = `${name}=; path=${options?.path ?? \"/\"}; max-age=0;`;\n        }\n      }\n    }\n  );\n}\n"],"names":[],"mappings":";;;;AAMI;AANJ;AAAA;;AAIO,SAAS;IACd,OAAO,IAAA,oMAAmB,sUAGxB;QACE,SAAS;YACP,KAAI,IAAI;gBACN,IAAI,OAAO,aAAa,aAAa,OAAO;gBAC5C,MAAM,QAAQ,SAAS,MAAM,CAAC,KAAK,CAAC,IAAI,OAAO,UAAU,OAAO;gBAChE,OAAO,QAAQ,KAAK,CAAC,EAAE,GAAG;YAC5B;YACA,KAAI,IAAI,EAAE,KAAK,EAAE,OAAO;gBACtB,IAAI,OAAO,aAAa,aAAa;gBACrC,IAAI,SAAS,GAAG,KAAK,CAAC,EAAE,MAAM,OAAO,EAAE,SAAS,QAAQ,IAAI,CAAC,CAAC;gBAC9D,IAAI,SAAS,QAAQ,UAAU,CAAC,SAAS,EAAE,QAAQ,MAAM,CAAC,CAAC,CAAC;gBAC5D,IAAI,SAAS,UAAU,UAAU,CAAC,UAAU,EAAE,QAAQ,QAAQ,CAAC,CAAC,CAAC;gBACjE,IAAI,SAAS,QAAQ,UAAU;gBAC/B,SAAS,MAAM,GAAG;YACpB;YACA,QAAO,IAAI,EAAE,OAAO;gBAClB,IAAI,OAAO,aAAa,aAAa;gBACrC,SAAS,MAAM,GAAG,GAAG,KAAK,QAAQ,EAAE,SAAS,QAAQ,IAAI,YAAY,CAAC;YACxE;QACF;IACF;AAEJ"}},
    {"offset": {"line": 42, "column": 0}, "map": {"version":3,"sources":["file:///C:/DevProjects/prospra/lib/utils.ts"],"sourcesContent":["import { clsx, type ClassValue } from 'clsx'\nimport { twMerge } from 'tailwind-merge'\n\nexport function cn(...inputs: ClassValue[]) {\n  return twMerge(clsx(inputs))\n}\n"],"names":[],"mappings":";;;;AAAA;AACA;;;AAEO,SAAS,GAAG,GAAG,MAAoB;IACxC,OAAO,IAAA,yKAAO,EAAC,IAAA,gJAAI,EAAC;AACtB"}},
    {"offset": {"line": 60, "column": 0}, "map": {"version":3,"sources":["file:///C:/DevProjects/prospra/components/ui/card.tsx"],"sourcesContent":["import * as React from 'react'\n\nimport { cn } from '@/lib/utils'\n\nfunction Card({ className, ...props }: React.ComponentProps<'div'>) {\n  return (\n    <div\n      data-slot=\"card\"\n      className={cn(\n        'bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm',\n        className,\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction CardHeader({ className, ...props }: React.ComponentProps<'div'>) {\n  return (\n    <div\n      data-slot=\"card-header\"\n      className={cn(\n        '@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-2 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6',\n        className,\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction CardTitle({ className, ...props }: React.ComponentProps<'div'>) {\n  return (\n    <div\n      data-slot=\"card-title\"\n      className={cn('leading-none font-semibold', className)}\n      {...props}\n    />\n  )\n}\n\nfunction CardDescription({ className, ...props }: React.ComponentProps<'div'>) {\n  return (\n    <div\n      data-slot=\"card-description\"\n      className={cn('text-muted-foreground text-sm', className)}\n      {...props}\n    />\n  )\n}\n\nfunction CardAction({ className, ...props }: React.ComponentProps<'div'>) {\n  return (\n    <div\n      data-slot=\"card-action\"\n      className={cn(\n        'col-start-2 row-span-2 row-start-1 self-start justify-self-end',\n        className,\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction CardContent({ className, ...props }: React.ComponentProps<'div'>) {\n  return (\n    <div\n      data-slot=\"card-content\"\n      className={cn('px-6', className)}\n      {...props}\n    />\n  )\n}\n\nfunction CardFooter({ className, ...props }: React.ComponentProps<'div'>) {\n  return (\n    <div\n      data-slot=\"card-footer\"\n      className={cn('flex items-center px-6 [.border-t]:pt-6', className)}\n      {...props}\n    />\n  )\n}\n\nexport {\n  Card,\n  CardHeader,\n  CardFooter,\n  CardTitle,\n  CardAction,\n  CardDescription,\n  CardContent,\n}\n"],"names":[],"mappings":";;;;;;;;;;;;;;;;;AAEA;;;AAEA,SAAS,KAAK,EAAE,SAAS,EAAE,GAAG,OAAoC;IAChE,qBACE,6LAAC;QACC,aAAU;QACV,WAAW,IAAA,qHAAE,EACX,qFACA;QAED,GAAG,KAAK;;;;;;AAGf;KAXS;AAaT,SAAS,WAAW,EAAE,SAAS,EAAE,GAAG,OAAoC;IACtE,qBACE,6LAAC;QACC,aAAU;QACV,WAAW,IAAA,qHAAE,EACX,4JACA;QAED,GAAG,KAAK;;;;;;AAGf;MAXS;AAaT,SAAS,UAAU,EAAE,SAAS,EAAE,GAAG,OAAoC;IACrE,qBACE,6LAAC;QACC,aAAU;QACV,WAAW,IAAA,qHAAE,EAAC,8BAA8B;QAC3C,GAAG,KAAK;;;;;;AAGf;MARS;AAUT,SAAS,gBAAgB,EAAE,SAAS,EAAE,GAAG,OAAoC;IAC3E,qBACE,6LAAC;QACC,aAAU;QACV,WAAW,IAAA,qHAAE,EAAC,iCAAiC;QAC9C,GAAG,KAAK;;;;;;AAGf;MARS;AAUT,SAAS,WAAW,EAAE,SAAS,EAAE,GAAG,OAAoC;IACtE,qBACE,6LAAC;QACC,aAAU;QACV,WAAW,IAAA,qHAAE,EACX,kEACA;QAED,GAAG,KAAK;;;;;;AAGf;MAXS;AAaT,SAAS,YAAY,EAAE,SAAS,EAAE,GAAG,OAAoC;IACvE,qBACE,6LAAC;QACC,aAAU;QACV,WAAW,IAAA,qHAAE,EAAC,QAAQ;QACrB,GAAG,KAAK;;;;;;AAGf;MARS;AAUT,SAAS,WAAW,EAAE,SAAS,EAAE,GAAG,OAAoC;IACtE,qBACE,6LAAC;QACC,aAAU;QACV,WAAW,IAAA,qHAAE,EAAC,2CAA2C;QACxD,GAAG,KAAK;;;;;;AAGf;MARS"}},
    {"offset": {"line": 180, "column": 0}, "map": {"version":3,"sources":["file:///C:/DevProjects/prospra/components/ui/button.tsx"],"sourcesContent":["import * as React from 'react'\nimport { Slot } from '@radix-ui/react-slot'\nimport { cva, type VariantProps } from 'class-variance-authority'\n\nimport { cn } from '@/lib/utils'\n\nconst buttonVariants = cva(\n  \"inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive\",\n  {\n    variants: {\n      variant: {\n        default: 'bg-primary text-primary-foreground hover:bg-primary/90',\n        destructive:\n          'bg-destructive text-white hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60',\n        outline:\n          'border bg-background shadow-xs hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50',\n        secondary:\n          'bg-secondary text-secondary-foreground hover:bg-secondary/80',\n        ghost:\n          'hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50',\n        link: 'text-primary underline-offset-4 hover:underline',\n      },\n      size: {\n        default: 'h-9 px-4 py-2 has-[>svg]:px-3',\n        sm: 'h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5',\n        lg: 'h-10 rounded-md px-6 has-[>svg]:px-4',\n        icon: 'size-9',\n        'icon-sm': 'size-8',\n        'icon-lg': 'size-10',\n      },\n    },\n    defaultVariants: {\n      variant: 'default',\n      size: 'default',\n    },\n  },\n)\n\nfunction Button({\n  className,\n  variant,\n  size,\n  asChild = false,\n  ...props\n}: React.ComponentProps<'button'> &\n  VariantProps<typeof buttonVariants> & {\n    asChild?: boolean\n  }) {\n  const Comp = asChild ? Slot : 'button'\n\n  return (\n    <Comp\n      data-slot=\"button\"\n      className={cn(buttonVariants({ variant, size, className }))}\n      {...props}\n    />\n  )\n}\n\nexport { Button, buttonVariants }\n"],"names":[],"mappings":";;;;;;;AACA;AACA;AAEA;;;;;AAEA,MAAM,iBAAiB,IAAA,0KAAG,EACxB,+bACA;IACE,UAAU;QACR,SAAS;YACP,SAAS;YACT,aACE;YACF,SACE;YACF,WACE;YACF,OACE;YACF,MAAM;QACR;QACA,MAAM;YACJ,SAAS;YACT,IAAI;YACJ,IAAI;YACJ,MAAM;YACN,WAAW;YACX,WAAW;QACb;IACF;IACA,iBAAiB;QACf,SAAS;QACT,MAAM;IACR;AACF;AAGF,SAAS,OAAO,EACd,SAAS,EACT,OAAO,EACP,IAAI,EACJ,UAAU,KAAK,EACf,GAAG,OAIF;IACD,MAAM,OAAO,UAAU,2KAAI,GAAG;IAE9B,qBACE,6LAAC;QACC,aAAU;QACV,WAAW,IAAA,qHAAE,EAAC,eAAe;YAAE;YAAS;YAAM;QAAU;QACvD,GAAG,KAAK;;;;;;AAGf;KAnBS"}},
    {"offset": {"line": 245, "column": 0}, "map": {"version":3,"sources":["file:///C:/DevProjects/prospra/components/UsageBar.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport { useEffect, useState } from \"react\";\r\nimport { Loader2 } from \"lucide-react\";\r\n\r\ninterface UsageData {\r\n  used: number;\r\n  limit: number;\r\n  isPremium: boolean;\r\n}\r\n\r\nexport function UsageBar({\r\n  onUsageUpdate,\r\n}: {\r\n  onUsageUpdate?: (data: UsageData & { remaining: number; limitReached: boolean }) => void;\r\n}) {\r\n  const [usage, setUsage] = useState<UsageData | null>(null);\r\n  const [loading, setLoading] = useState(true);\r\n\r\n  const fetchCredits = async () => {\r\n    try {\r\n      const res = await fetch(\"/api/credits\");\r\n      if (!res.ok) throw new Error(`Credits fetch failed: ${res.status}`);\r\n\r\n      const data = await res.json();\r\n      setUsage(data);\r\n\r\n      if (onUsageUpdate && data) {\r\n        const remaining = Math.max(0, data.limit - data.used);\r\n        const limitReached = remaining <= 0 && !data.isPremium;\r\n\r\n        onUsageUpdate({\r\n          ...data,\r\n          remaining,\r\n          limitReached,\r\n        });\r\n      }\r\n    } catch (err) {\r\n      console.error(\"UsageBar fetch error:\", err);\r\n      setUsage(null);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    fetchCredits();\r\n\r\n    const interval = setInterval(fetchCredits, 20000); // refresh every 20s\r\n    return () => clearInterval(interval);\r\n  }, []);\r\n\r\n  // Loading state\r\n  if (loading) {\r\n    return (\r\n      <div className=\"w-full h-6 bg-brandNavyDark border border-brandBlue/40 rounded-lg flex items-center justify-center\">\r\n        <Loader2 className=\"h-4 w-4 text-brandBlueLight animate-spin\" />\r\n      </div>\r\n    );\r\n  }\r\n\r\n  if (!usage) {\r\n    return (\r\n      <div className=\"w-full py-2 text-center text-brandBlueLight/60 bg-brandNavyDark border border-brandBlue/40 rounded-lg\">\r\n        Usage unavailable\r\n      </div>\r\n    );\r\n  }\r\n\r\n  // Premium unlimited bar\r\n  if (usage.isPremium) {\r\n    return (\r\n      <div className=\"w-full py-2 text-center text-brandBlueLight bg-brandNavyDark border border-brandBlue/40 rounded-lg\">\r\n        Unlimited messages — You’re Pro ⭐\r\n      </div>\r\n    );\r\n  }\r\n\r\n  // Free user usage bar\r\n  const remaining = Math.max(0, usage.limit - usage.used);\r\n  const percent = Math.min(100, (usage.used / usage.limit) * 100);\r\n  const limitReached = remaining <= 0;\r\n\r\n  return (\r\n    <div className=\"space-y-1\">\r\n      <div className=\"flex justify-between text-xs text-brandBlueLight/70 px-1\">\r\n        <span>\r\n          {limitReached ? \"No messages left today\" : `${remaining} messages left today`}\r\n        </span>\r\n        <span>\r\n          {usage.used}/{usage.limit}\r\n        </span>\r\n      </div>\r\n\r\n      <div className=\"w-full h-3 bg-brandNavyDark border border-brandBlue/40 rounded-full overflow-hidden\">\r\n        <div\r\n          className={`h-full transition-all duration-300 \r\n            ${limitReached\r\n              ? \"bg-brandOrange\"\r\n              : \"bg-gradient-to-r from-brandBlue to-brandBlueLight\"\r\n          }`}\r\n          style={{ width: `${percent}%` }}\r\n        />\r\n      </div>\r\n\r\n      {limitReached && (\r\n        <p className=\"text-xs text-brandOrangeLight text-center mt-1\">\r\n          Daily limit reached — upgrade for unlimited access\r\n        </p>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":";;;;;AAEA;AACA;;;AAHA;;;AAWO,SAAS,SAAS,EACvB,aAAa,EAGd;;IACC,MAAM,CAAC,OAAO,SAAS,GAAG,IAAA,yKAAQ,EAAmB;IACrD,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,yKAAQ,EAAC;IAEvC,MAAM,eAAe;QACnB,IAAI;YACF,MAAM,MAAM,MAAM,MAAM;YACxB,IAAI,CAAC,IAAI,EAAE,EAAE,MAAM,IAAI,MAAM,CAAC,sBAAsB,EAAE,IAAI,MAAM,EAAE;YAElE,MAAM,OAAO,MAAM,IAAI,IAAI;YAC3B,SAAS;YAET,IAAI,iBAAiB,MAAM;gBACzB,MAAM,YAAY,KAAK,GAAG,CAAC,GAAG,KAAK,KAAK,GAAG,KAAK,IAAI;gBACpD,MAAM,eAAe,aAAa,KAAK,CAAC,KAAK,SAAS;gBAEtD,cAAc;oBACZ,GAAG,IAAI;oBACP;oBACA;gBACF;YACF;QACF,EAAE,OAAO,KAAK;YACZ,QAAQ,KAAK,CAAC,yBAAyB;YACvC,SAAS;QACX,SAAU;YACR,WAAW;QACb;IACF;IAEA,IAAA,0KAAS;8BAAC;YACR;YAEA,MAAM,WAAW,YAAY,cAAc,QAAQ,oBAAoB;YACvE;sCAAO,IAAM,cAAc;;QAC7B;6BAAG,EAAE;IAEL,gBAAgB;IAChB,IAAI,SAAS;QACX,qBACE,6LAAC;YAAI,WAAU;sBACb,cAAA,6LAAC,+NAAO;gBAAC,WAAU;;;;;;;;;;;IAGzB;IAEA,IAAI,CAAC,OAAO;QACV,qBACE,6LAAC;YAAI,WAAU;sBAAwG;;;;;;IAI3H;IAEA,wBAAwB;IACxB,IAAI,MAAM,SAAS,EAAE;QACnB,qBACE,6LAAC;YAAI,WAAU;sBAAqG;;;;;;IAIxH;IAEA,sBAAsB;IACtB,MAAM,YAAY,KAAK,GAAG,CAAC,GAAG,MAAM,KAAK,GAAG,MAAM,IAAI;IACtD,MAAM,UAAU,KAAK,GAAG,CAAC,KAAK,AAAC,MAAM,IAAI,GAAG,MAAM,KAAK,GAAI;IAC3D,MAAM,eAAe,aAAa;IAElC,qBACE,6LAAC;QAAI,WAAU;;0BACb,6LAAC;gBAAI,WAAU;;kCACb,6LAAC;kCACE,eAAe,2BAA2B,GAAG,UAAU,oBAAoB,CAAC;;;;;;kCAE/E,6LAAC;;4BACE,MAAM,IAAI;4BAAC;4BAAE,MAAM,KAAK;;;;;;;;;;;;;0BAI7B,6LAAC;gBAAI,WAAU;0BACb,cAAA,6LAAC;oBACC,WAAW,CAAC;YACV,EAAE,eACE,mBACA,qDACJ;oBACF,OAAO;wBAAE,OAAO,GAAG,QAAQ,CAAC,CAAC;oBAAC;;;;;;;;;;;YAIjC,8BACC,6LAAC;gBAAE,WAAU;0BAAiD;;;;;;;;;;;;AAMtE;GArGgB;KAAA"}},
    {"offset": {"line": 408, "column": 0}, "map": {"version":3,"sources":["file:///C:/DevProjects/prospra/components/UpgradeBanner.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport { Sparkles, Crown } from \"lucide-react\";\r\nimport { useEffect, useState } from \"react\";\r\nimport Link from \"next/link\";\r\n\r\nexport function UpgradeBanner() {\r\n  const [usage, setUsage] = useState<any>(null);\r\n\r\n  useEffect(() => {\r\n    const load = async () => {\r\n      const res = await fetch(\"/api/usage\");\r\n      const data = await res.json();\r\n      setUsage(data);\r\n    };\r\n    load();\r\n  }, []);\r\n\r\n  if (!usage || usage.isPremium) {\r\n    return null; // Premium users don't see the banner\r\n  }\r\n\r\n  const { remaining, limit } = usage;\r\n\r\n  const shouldShow =\r\n    remaining <= 5 || // Less than 5 messages left today\r\n    remaining === 0;  // Out of messages already\r\n\r\n  if (!shouldShow) return null;\r\n\r\n  return (\r\n    <div className=\"bg-gradient-to-r from-indigo-600 to-purple-600 text-white p-4 rounded-xl shadow-md flex items-center gap-4 my-4 border border-indigo-400/40\">\r\n      <Crown className=\"h-6 w-6\" />\r\n\r\n      <div className=\"flex-1\">\r\n        <p className=\"font-semibold text-sm\">\r\n          {remaining === 0\r\n            ? \"You're out of messages for today!\"\r\n            : `Only ${remaining} messages left today!`}\r\n        </p>\r\n        <p className=\"text-xs opacity-90\">\r\n          Upgrade to Prospra Pro for unlimited mentoring + advanced business tools.\r\n        </p>\r\n      </div>\r\n\r\n      <Link\r\n        href=\"/upgrade\"\r\n        className=\"px-4 py-2 text-sm font-bold bg-black/20 rounded-lg hover:bg-black/30 transition\"\r\n      >\r\n        Upgrade\r\n      </Link>\r\n\r\n      <Sparkles className=\"h-5 w-5 opacity-80 animate-pulse\" />\r\n    </div>\r\n  );\r\n}\n"],"names":[],"mappings":";;;;;AAEA;AAAA;AACA;AACA;;;AAJA;;;;AAMO,SAAS;;IACd,MAAM,CAAC,OAAO,SAAS,GAAG,IAAA,yKAAQ,EAAM;IAExC,IAAA,0KAAS;mCAAC;YACR,MAAM;gDAAO;oBACX,MAAM,MAAM,MAAM,MAAM;oBACxB,MAAM,OAAO,MAAM,IAAI,IAAI;oBAC3B,SAAS;gBACX;;YACA;QACF;kCAAG,EAAE;IAEL,IAAI,CAAC,SAAS,MAAM,SAAS,EAAE;QAC7B,OAAO,MAAM,qCAAqC;IACpD;IAEA,MAAM,EAAE,SAAS,EAAE,KAAK,EAAE,GAAG;IAE7B,MAAM,aACJ,aAAa,KAAK,kCAAkC;IACpD,cAAc,GAAI,0BAA0B;IAE9C,IAAI,CAAC,YAAY,OAAO;IAExB,qBACE,6LAAC;QAAI,WAAU;;0BACb,6LAAC,gNAAK;gBAAC,WAAU;;;;;;0BAEjB,6LAAC;gBAAI,WAAU;;kCACb,6LAAC;wBAAE,WAAU;kCACV,cAAc,IACX,sCACA,CAAC,KAAK,EAAE,UAAU,qBAAqB,CAAC;;;;;;kCAE9C,6LAAC;wBAAE,WAAU;kCAAqB;;;;;;;;;;;;0BAKpC,6LAAC,0KAAI;gBACH,MAAK;gBACL,WAAU;0BACX;;;;;;0BAID,6LAAC,yNAAQ;gBAAC,WAAU;;;;;;;;;;;;AAG1B;GAjDgB;KAAA"}},
    {"offset": {"line": 514, "column": 0}, "map": {"version":3,"sources":["file:///C:/DevProjects/prospra/components/PremiumFeaturePanel.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport { useState, useEffect } from \"react\";\r\nimport {\r\n  Sparkles,\r\n  BarChart3,\r\n  Layers,\r\n  Target,\r\n  Briefcase,\r\n  Lock,\r\n} from \"lucide-react\";\r\n\r\nexport function PremiumFeaturePanel({\r\n  onFeatureSelect,\r\n}: {\r\n  onFeatureSelect: (text: string) => void;\r\n}) {\r\n  const [isPremium, setIsPremium] = useState<boolean | null>(null);\r\n\r\n  useEffect(() => {\r\n    const load = async () => {\r\n      try {\r\n        const res = await fetch(\"/api/credits\");\r\n        const data = await res.json();\r\n        setIsPremium(data.isPremium);\r\n      } catch (error) {\r\n        console.error(\"Failed to load premium status:\", error);\r\n      }\r\n    };\r\n    load();\r\n  }, []);\r\n\r\n  if (isPremium === null) return null; // still loading\r\n\r\n  const features = [\r\n    {\r\n      title: \"Generate SWOT Analysis\",\r\n      prompt: \"Generate a full SWOT analysis for my business.\",\r\n      icon: Layers,\r\n      premium: true,\r\n    },\r\n    {\r\n      title: \"Create 90-Day Roadmap\",\r\n      prompt: \"Create a complete 90-day business execution roadmap.\",\r\n      icon: Target,\r\n      premium: true,\r\n    },\r\n    {\r\n      title: \"Build Business Model\",\r\n      prompt: \"Build a detailed business model canvas for my idea.\",\r\n      icon: Briefcase,\r\n      premium: true,\r\n    },\r\n    {\r\n      title: \"Market Analysis\",\r\n      prompt: \"Run a quick target market analysis.\",\r\n      icon: BarChart3,\r\n      premium: true,\r\n    },\r\n    {\r\n      title: \"Pricing Strategy\",\r\n      prompt: \"Create a pricing strategy for my product.\",\r\n      icon: Sparkles,\r\n      premium: true,\r\n    },\r\n  ];\r\n\r\n  const handleClick = (feature: any) => {\r\n    if (feature.premium && !isPremium) {\r\n      onFeatureSelect(\r\n        \"Upgrade to Prospra Premium to unlock this advanced feature.\"\r\n      );\r\n      return;\r\n    }\r\n    onFeatureSelect(feature.prompt);\r\n  };\r\n\r\n  return (\r\n    <div className=\"grid grid-cols-2 md:grid-cols-3 gap-3 bg-brandNavyDark border border-brandBlue/50 rounded-xl p-4 mb-4 shadow-lg\">\r\n      {features.map((feature) => {\r\n        const Icon = feature.icon;\r\n        const locked = feature.premium && !isPremium;\r\n\r\n        return (\r\n          <button\r\n            key={feature.title}\r\n            onClick={() => handleClick(feature)}\r\n            disabled={locked}\r\n            className={`relative flex items-center gap-3 p-3 rounded-lg border transition-all\r\n              ${\r\n                locked\r\n                  ? \"bg-brandNavy/60 border-brandBlue/30 opacity-60 cursor-pointer hover:opacity-70\"\r\n                  : \"bg-brandNavy border-brandBlue hover:border-brandOrangeLight hover:bg-brandNavyDark\"\r\n              }\r\n            `}\r\n          >\r\n            {/* Lock overlay */}\r\n            {locked && (\r\n              <div className=\"absolute inset-0 bg-brandNavy/40 backdrop-blur-[2px] rounded-lg flex items-center justify-center pointer-events-none\">\r\n                <Lock className=\"h-5 w-5 text-brandOrangeLight opacity-80\" />\r\n              </div>\r\n            )}\r\n\r\n            {/* Icon box */}\r\n            <div\r\n              className={`h-8 w-8 rounded-md flex items-center justify-center transition-all\r\n                ${\r\n                  locked\r\n                    ? \"bg-brandBlue/20 border border-brandBlue/30\"\r\n                    : \"bg-gradient-to-br from-brandBlueLight to-brandBlue shadow-md\"\r\n                }\r\n              `}\r\n            >\r\n              <Icon\r\n                className={`h-4 w-4 ${\r\n                  locked ? \"text-brandBlueLight/70\" : \"text-white\"\r\n                }`}\r\n              />\r\n            </div>\r\n\r\n            {/* Text */}\r\n            <span\r\n              className={`text-sm text-left leading-tight transition ${\r\n                locked ? \"text-brandBlueLight/70\" : \"text-brandBlueLight\"\r\n              }`}\r\n            >\r\n              {feature.title}\r\n\r\n              {locked && (\r\n                <span className=\"ml-1 text-brandOrangeLight text-xs font-medium\">\r\n                  (Premium)\r\n                </span>\r\n              )}\r\n            </span>\r\n          </button>\r\n        );\r\n      })}\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":";;;;;AAEA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;;;AAHA;;;AAYO,SAAS,oBAAoB,EAClC,eAAe,EAGhB;;IACC,MAAM,CAAC,WAAW,aAAa,GAAG,IAAA,yKAAQ,EAAiB;IAE3D,IAAA,0KAAS;yCAAC;YACR,MAAM;sDAAO;oBACX,IAAI;wBACF,MAAM,MAAM,MAAM,MAAM;wBACxB,MAAM,OAAO,MAAM,IAAI,IAAI;wBAC3B,aAAa,KAAK,SAAS;oBAC7B,EAAE,OAAO,OAAO;wBACd,QAAQ,KAAK,CAAC,kCAAkC;oBAClD;gBACF;;YACA;QACF;wCAAG,EAAE;IAEL,IAAI,cAAc,MAAM,OAAO,MAAM,gBAAgB;IAErD,MAAM,WAAW;QACf;YACE,OAAO;YACP,QAAQ;YACR,MAAM,mNAAM;YACZ,SAAS;QACX;QACA;YACE,OAAO;YACP,QAAQ;YACR,MAAM,mNAAM;YACZ,SAAS;QACX;QACA;YACE,OAAO;YACP,QAAQ;YACR,MAAM,4NAAS;YACf,SAAS;QACX;QACA;YACE,OAAO;YACP,QAAQ;YACR,MAAM,kOAAS;YACf,SAAS;QACX;QACA;YACE,OAAO;YACP,QAAQ;YACR,MAAM,yNAAQ;YACd,SAAS;QACX;KACD;IAED,MAAM,cAAc,CAAC;QACnB,IAAI,QAAQ,OAAO,IAAI,CAAC,WAAW;YACjC,gBACE;YAEF;QACF;QACA,gBAAgB,QAAQ,MAAM;IAChC;IAEA,qBACE,6LAAC;QAAI,WAAU;kBACZ,SAAS,GAAG,CAAC,CAAC;YACb,MAAM,OAAO,QAAQ,IAAI;YACzB,MAAM,SAAS,QAAQ,OAAO,IAAI,CAAC;YAEnC,qBACE,6LAAC;gBAEC,SAAS,IAAM,YAAY;gBAC3B,UAAU;gBACV,WAAW,CAAC;cACV,EACE,SACI,mFACA,qFACL;YACH,CAAC;;oBAGA,wBACC,6LAAC;wBAAI,WAAU;kCACb,cAAA,6LAAC,6MAAI;4BAAC,WAAU;;;;;;;;;;;kCAKpB,6LAAC;wBACC,WAAW,CAAC;gBACV,EACE,SACI,+CACA,+DACL;cACH,CAAC;kCAED,cAAA,6LAAC;4BACC,WAAW,CAAC,QAAQ,EAClB,SAAS,2BAA2B,cACpC;;;;;;;;;;;kCAKN,6LAAC;wBACC,WAAW,CAAC,2CAA2C,EACrD,SAAS,2BAA2B,uBACpC;;4BAED,QAAQ,KAAK;4BAEb,wBACC,6LAAC;gCAAK,WAAU;0CAAiD;;;;;;;;;;;;;eA5ChE,QAAQ,KAAK;;;;;QAmDxB;;;;;;AAGN;GA/HgB;KAAA"}},
    {"offset": {"line": 674, "column": 0}, "map": {"version":3,"sources":["file:///C:/DevProjects/prospra/components/TypingIndicator.tsx"],"sourcesContent":["\"use client\";\r\n\r\nexport function TypingIndicator() {\r\n  return (\r\n    <div className=\"flex items-center gap-2 ml-12\">\r\n      <div className=\"h-8 w-8 rounded-lg bg-gradient-to-br from-indigo-500 to-purple-600 flex items-center justify-center\">\r\n        <span className=\"text-white text-lg\">•</span>\r\n      </div>\r\n\r\n      <div className=\"flex items-center space-x-1 bg-slate-800 text-slate-300 px-4 py-2 rounded-2xl\">\r\n        <div className=\"w-2 h-2 bg-slate-500 rounded-full animate-bounce [animation-delay:-0.2s]\" />\r\n        <div className=\"w-2 h-2 bg-slate-500 rounded-full animate-bounce [animation-delay:-0.1s]\" />\r\n        <div className=\"w-2 h-2 bg-slate-500 rounded-full animate-bounce\" />\r\n      </div>\r\n    </div>\r\n  );\r\n}\n"],"names":[],"mappings":";;;;;AAAA;;AAEO,SAAS;IACd,qBACE,6LAAC;QAAI,WAAU;;0BACb,6LAAC;gBAAI,WAAU;0BACb,cAAA,6LAAC;oBAAK,WAAU;8BAAqB;;;;;;;;;;;0BAGvC,6LAAC;gBAAI,WAAU;;kCACb,6LAAC;wBAAI,WAAU;;;;;;kCACf,6LAAC;wBAAI,WAAU;;;;;;kCACf,6LAAC;wBAAI,WAAU;;;;;;;;;;;;;;;;;;AAIvB;KAdgB"}},
    {"offset": {"line": 747, "column": 0}, "map": {"version":3,"sources":["file:///C:/DevProjects/prospra/app/mentor/page.tsx"],"sourcesContent":["\"use client\";\n\nimport { useEffect, useState, useRef } from \"react\";\nimport { useRouter } from \"next/navigation\";\nimport { createClient } from \"@/lib/supabase/client\";\nimport { Card } from \"@/components/ui/card\";\nimport { Button } from \"@/components/ui/button\";\nimport {\n  MessageSquare,\n  Plus,\n  Send,\n  Sparkles,\n  Crown,\n} from \"lucide-react\";\nimport { useChat } from \"@ai-sdk/react\";\nimport Link from \"next/link\";\n\nimport { UsageBar } from \"@/components/UsageBar\";\nimport { UpgradeBanner } from \"@/components/UpgradeBanner\";\nimport { PremiumFeaturePanel } from \"@/components/PremiumFeaturePanel\";\nimport { TypingIndicator } from \"@/components/TypingIndicator\";\n\nimport ReactMarkdown from \"react-markdown\";\nimport remarkGfm from \"remark-gfm\";\nimport mermaid from \"mermaid\";\n\ninterface Conversation {\n  id: string;\n  title: string;\n  created_at: string;\n}\n\ninterface Profile {\n  full_name: string;\n  business_idea: string;\n  industry: string;\n  experience_level: string;\n  goals: string[];\n}\n\ntype ModeOption =\n  | \"mentor\"\n  | \"website-coach\"\n  | \"seo-ux\"\n  | \"funnel-mapping\"\n  | \"cta-analyzer\";\n\nconst MODE_LABELS: Record<ModeOption, string> = {\n  mentor: \"Mentor Mode\",\n  \"website-coach\": \"Website Coach\",\n  \"seo-ux\": \"SEO/UX Scoring\",\n  \"funnel-mapping\": \"Funnel Mapping\",\n  \"cta-analyzer\": \"CTA Analyzer\",\n};\n\nconst MODE_DESCRIPTIONS: Record<ModeOption, string> = {\n  mentor: \"Tailored entrepreneurial guidance.\",\n  \"website-coach\": \"Deep-dive feedback on your website’s clarity and conversion.\",\n  \"seo-ux\": \"SEO/UX scoring and optimization suggestions for your pages.\",\n  \"funnel-mapping\": \"Map your customer journey and plug funnel leaks.\",\n  \"cta-analyzer\": \"Analyze and upgrade your CTAs and key copy moments.\",\n};\n\ninterface CtaScore {\n  clarity: number;\n  emotion: number;\n  strength: number;\n  urgency: number;\n  conversion: number;\n  summary?: string;\n}\n\nexport default function MentorPage() {\n  const [conversations, setConversations] = useState<Conversation[]>([]);\n  const [currentConversationId, setCurrentConversationId] = useState<string | null>(null);\n  const [profile, setProfile] = useState<Profile | null>(null);\n  const [isLoadingConversations, setIsLoadingConversations] = useState(true);\n\n  const [input, setInput] = useState(\"\");\n  const textareaRef = useRef<HTMLTextAreaElement | null>(null);\n\n  const [file, setFile] = useState<File | null>(null);\n  const [uploading, setUploading] = useState(false);\n  const [localError, setLocalError] = useState<string | null>(null);\n\n  const [limitReached, setLimitReached] = useState(false);\n\n  const [mode, setMode] = useState<ModeOption>(\"mentor\");\n  const [ctaScore, setCtaScore] = useState<CtaScore | null>(null);\n  const [funnelMermaid, setFunnelMermaid] = useState<string | null>(null);\n\n  const router = useRouter();\n  const supabase = createClient();\n  const messageEndRef = useRef<HTMLDivElement | null>(null);\n\n  const conversationIdRef = useRef<string | null>(null);\n  const profileRef = useRef<Profile | null>(null);\n\n  // Auto-expand textarea\n  useEffect(() => {\n    if (!textareaRef.current) return;\n    textareaRef.current.style.height = \"0px\";\n    textareaRef.current.style.height = textareaRef.current.scrollHeight + \"px\";\n  }, [input]);\n\n  // Keep refs synced\n  useEffect(() => {\n    conversationIdRef.current = currentConversationId;\n  }, [currentConversationId]);\n\n  useEffect(() => {\n    profileRef.current = profile;\n  }, [profile]);\n\n  // Extract text from message parts\n  const getMessageText = (message: any) => {\n    if (!message) return \"\";\n    if (typeof message.content === \"string\") return message.content;\n    if (Array.isArray(message.parts)) {\n      return message.parts\n        .map((part: any) =>\n          part?.text\n            ? part.text\n            : typeof part?.content === \"string\"\n            ? part.content\n            : \"\"\n        )\n        .join(\"\");\n    }\n    return \"\";\n  };\n\n  // CHAT HOOK\n  const chat: any = useChat({\n    id: \"mentor-chat\",\n    onError: (error: any) => {\n      console.error(\"Mentor chat error:\", error);\n    },\n    onFinish: async ({ message }: any) => {\n      const assistantText = getMessageText(message);\n      const savedConversationId = conversationIdRef.current;\n\n      if (savedConversationId && assistantText) {\n        await supabase.from(\"messages\").insert({\n          conversation_id: savedConversationId,\n          role: \"assistant\",\n          content: assistantText,\n        });\n      }\n    },\n  }) as any;\n\n  const { messages, setMessages, sendMessage, status, error: chatError } = chat;\n  const isLoading = status === \"submitted\" || status === \"streaming\";\n\n  // Auto-scroll\n  useEffect(() => {\n    messageEndRef.current?.scrollIntoView({ behavior: \"smooth\" });\n  }, [messages, isLoading]);\n\n  // Parse CTA score from latest assistant message in CTA mode\n  useEffect(() => {\n    if (mode !== \"cta-analyzer\") return;\n\n    const lastAssistant = [...messages].reverse().find((m: any) => m.role === \"assistant\");\n    if (!lastAssistant) return;\n\n    const content = getMessageText(lastAssistant);\n    const match = content.match(/```cta-score([\\s\\S]*?)```/i);\n    if (!match) return;\n\n    try {\n      const json = JSON.parse(match[1].trim());\n      setCtaScore({\n        clarity: json.clarity ?? 0,\n        emotion: json.emotion ?? 0,\n        strength: json.strength ?? 0,\n        urgency: json.urgency ?? 0,\n        conversion: json.conversion ?? 0,\n        summary: json.summary ?? \"\",\n      });\n    } catch (err) {\n      console.warn(\"Failed to parse CTA score JSON:\", err);\n    }\n  }, [messages, mode]);\n\n  // Parse Mermaid funnel diagram from latest assistant message in Funnel mode\n  useEffect(() => {\n    if (mode !== \"funnel-mapping\") return;\n\n    const lastAssistant = [...messages].reverse().find((m: any) => m.role === \"assistant\");\n    if (!lastAssistant) return;\n\n    const content = getMessageText(lastAssistant);\n    const mermaidMatch = content.match(/```mermaid([\\s\\S]*?)```/i);\n    if (!mermaidMatch) return;\n\n    const code = mermaidMatch[1].trim();\n    if (code) {\n      setFunnelMermaid(code);\n    }\n  }, [messages, mode]);\n\n  // Clear CTA + funnel when leaving their modes\n  useEffect(() => {\n    if (mode !== \"cta-analyzer\") setCtaScore(null);\n    if (mode !== \"funnel-mapping\") setFunnelMermaid(null);\n  }, [mode]);\n\n  // Fetch user profile + conversations\n  useEffect(() => {\n    const init = async () => {\n      const {\n        data: { user },\n      } = await supabase.auth.getUser();\n\n      if (!user) {\n        router.push(\"/auth/login\");\n        return;\n      }\n\n      const { data: profileData } = await supabase\n        .from(\"profiles\")\n        .select(\"*\")\n        .eq(\"id\", user.id)\n        .single();\n\n      if (profileData) setProfile(profileData);\n\n      await loadConversations(user.id);\n    };\n\n    void init();\n  }, [router, supabase]);\n\n  const loadConversations = async (userId: string) => {\n    setIsLoadingConversations(true);\n\n    const { data } = await supabase\n      .from(\"conversations\")\n      .select(\"*\")\n      .eq(\"user_id\", userId)\n      .order(\"created_at\", { ascending: false });\n\n    if (data) {\n      setConversations(data as Conversation[]);\n    }\n\n    setIsLoadingConversations(false);\n  };\n\n  const createNewConversation = async () => {\n    const {\n      data: { user },\n    } = await supabase.auth.getUser();\n    if (!user) return;\n\n    const { data, error } = await supabase\n      .from(\"conversations\")\n      .insert({ user_id: user.id, title: \"New Conversation\" })\n      .select()\n      .single();\n\n    if (data && !error) {\n      setConversations((prev) => [data as Conversation, ...prev]);\n      setCurrentConversationId((data as any).id);\n      setMessages([]);\n      setCtaScore(null);\n      setFunnelMermaid(null);\n    }\n  };\n\n  const loadConversation = async (conversationId: string) => {\n    setCurrentConversationId(conversationId);\n    setCtaScore(null);\n    setFunnelMermaid(null);\n\n    const { data } = await supabase\n      .from(\"messages\")\n      .select(\"*\")\n      .eq(\"conversation_id\", conversationId)\n      .order(\"created_at\", { ascending: true });\n\n    if (data) {\n      setMessages(\n        (data as any[]).map((msg: any, index: number) => ({\n          id: msg.id || `msg-${conversationId}-${index}`,\n          role: msg.role as \"user\" | \"assistant\",\n          parts: [{ type: \"text\", text: msg.content }],\n        }))\n      );\n    }\n  };\n\n  // Submit handler\n  const onSubmit = async (e: React.FormEvent) => {\n    e.preventDefault();\n    if ((!input.trim() && !file) || uploading || limitReached) return;\n\n    const {\n      data: { user },\n    } = await supabase.auth.getUser();\n\n    if (!user) {\n      router.push(\"/auth/login\");\n      return;\n    }\n\n    let conversationId = currentConversationId;\n\n    if (!conversationId) {\n      const { data } = await supabase\n        .from(\"conversations\")\n        .insert({\n          user_id: user.id,\n          title: input.slice(0, 50) || \"New Conversation\",\n        })\n        .select()\n        .single();\n\n      if (data) {\n        conversationId = (data as any).id;\n        setCurrentConversationId(conversationId);\n        setConversations((prev) => [data as any, ...prev]);\n      }\n    }\n\n    if (!conversationId) return;\n\n    let contentToSend = input.trim();\n\n    // File upload\n    if (file) {\n      try {\n        setUploading(true);\n\n        const formData = new FormData();\n        formData.append(\"file\", file);\n\n        const res = await fetch(\"/api/upload-file\", {\n          method: \"POST\",\n          body: formData,\n        });\n\n        if (!res.ok) {\n          setLocalError(\"File upload failed\");\n          return;\n        }\n\n        const data = await res.json();\n        const fileUrl = data.url;\n\n        const fileLine = `**Attached File:** ${file.name}\\n${fileUrl}`;\n        contentToSend = contentToSend\n          ? `${contentToSend}\\n\\n${fileLine}`\n          : fileLine;\n      } finally {\n        setUploading(false);\n        setFile(null);\n      }\n    }\n\n    // Save message\n    await supabase.from(\"messages\").insert({\n      conversation_id: conversationId,\n      role: \"user\",\n      content: contentToSend,\n    });\n\n    // Send to AI with dynamic body (includes mode)\n    await sendMessage(\n      {\n        role: \"user\",\n        parts: [{ type: \"text\", text: contentToSend }],\n      },\n      { body: { conversationId, profile, mode } }\n    );\n\n    setInput(\"\");\n    setLocalError(null);\n  };\n\n  const handleSuggestionClick = (text: string) => {\n    setInput(text);\n  };\n\n  // -------------------------------------------\n  // UI START\n  // -------------------------------------------\n  return (\n    <div className=\"flex gap-6 h-[calc(100vh-120px)] max-w-7xl w-full mx-auto\">\n      {/* Sidebar */}\n      <div className=\"w-80 flex-shrink-0\">\n        <Card className=\"bg-brandNavy border border-brandBlue h-full rounded-xl shadow-lg flex flex-col\">\n          <div className=\"p-4 border-b border-brandBlue/50\">\n            <Button\n              onClick={createNewConversation}\n              className=\"w-full bg-brandOrange hover:bg-brandOrangeLight text-white rounded-xl\"\n            >\n              <Plus className=\"h-4 w-4 mr-2\" />\n              New Conversation\n            </Button>\n          </div>\n\n          <div className=\"flex-1 overflow-y-auto p-4\">\n            {isLoadingConversations ? (\n              <div className=\"flex items-center justify-center py-8\">\n                <Sparkles className=\"h-6 w-6 animate-spin text-brandBlueLight\" />\n              </div>\n            ) : conversations.length === 0 ? (\n              <div className=\"text-center py-8\">\n                <MessageSquare className=\"h11 w-11 text-brandBlueLight mx-auto mb-3\" />\n                <p className=\"text-sm text-brandBlueLight/70\">No conversations yet</p>\n              </div>\n            ) : (\n              <div className=\"space-y-2\">\n                {conversations.map((conv) => (\n                  <button\n                    key={conv.id}\n                    onClick={() => loadConversation(conv.id)}\n                    className={`w-full text-left p-3 rounded-lg transition-all border ${\n                      currentConversationId === conv.id\n                        ? \"bg-brandBlue/20 border-brandBlue text-brandBlueLight\"\n                        : \"bg-brandNavyDark border-transparent hover:bg-brandNavy text-brandBlueLight/80\"\n                    }`}\n                  >\n                    <p className=\"text-sm font-medium truncate\">{conv.title}</p>\n                    <p className=\"text-xs text-brandBlueLight/70 mt-1\">\n                      {new Date(conv.created_at).toLocaleDateString()}\n                    </p>\n                  </button>\n                ))}\n              </div>\n            )}\n          </div>\n        </Card>\n      </div>\n\n      {/* Chat Panel */}\n      <div className=\"flex-1 flex flex-col min-w-0\">\n        <Card className=\"bg-brandNavy border border-brandBlue flex-1 flex flex-col rounded-xl shadow-xl\">\n          {/* Header */}\n          <div className=\"border-b border-brandBlue/50 px-6 py-4 flex items-center justify-between bg-brandNavyDark gap-4\">\n            <div className=\"flex flex-col w-full gap-3\">\n              <UsageBar\n                onUsageUpdate={(data) => setLimitReached(data.limitReached)}\n              />\n\n              {limitReached && (\n                <div className=\"p-3 bg-brandOrange/20 border border-brandOrange/50 text-brandOrangeLight rounded-lg text-sm text-center shadow-sm\">\n                  You hit your free daily message limit — upgrade for unlimited access.\n                </div>\n              )}\n\n              <UpgradeBanner />\n              <PremiumFeaturePanel onFeatureSelect={(text) => setInput(text)} />\n            </div>\n\n            <div className=\"flex items-center gap-3 ml-4\">\n              <div className=\"h-10 w-10 rounded-xl bg-brandBlue/30 flex items-center justify-center\">\n                <Sparkles className=\"h-6 w-6 text-brandBlueLight\" />\n              </div>\n              <div className=\"flex flex-col gap-1\">\n                <h2 className=\"text-xl font-semibold text-brandBlueLight\">\n                  Prospra Mentor\n                </h2>\n                <p className=\"text-xs text-brandBlueLight/70\">\n                  {MODE_DESCRIPTIONS[mode]}\n                </p>\n                <div className=\"mt-1\">\n                  <label className=\"text-[10px] uppercase tracking-wide text-brandBlueLight/60\">\n                    Mode\n                  </label>\n                  <select\n                    value={mode}\n                    onChange={(e) => setMode(e.target.value as ModeOption)}\n                    className=\"mt-1 text-xs bg-brandNavy border border-brandBlue/60 rounded-lg px-2 py-1 text-brandBlueLight focus:outline-none focus:ring-2 focus:ring-brandOrangeLight/60 focus:border-brandOrangeLight transition\"\n                  >\n                    <option value=\"mentor\">{MODE_LABELS[\"mentor\"]}</option>\n                    <option value=\"website-coach\">{MODE_LABELS[\"website-coach\"]}</option>\n                    <option value=\"seo-ux\">{MODE_LABELS[\"seo-ux\"]}</option>\n                    <option value=\"funnel-mapping\">{MODE_LABELS[\"funnel-mapping\"]}</option>\n                    <option value=\"cta-analyzer\">{MODE_LABELS[\"cta-analyzer\"]}</option>\n                  </select>\n                </div>\n              </div>\n            </div>\n\n            <Link href=\"/upgrade\">\n              <Button className=\"bg-brandOrange hover:bg-brandOrangeLight text-white rounded-xl flex items-center gap-2 px-4 py-2\">\n                <Crown className=\"h-4 w-4\" />\n                Go Premium\n              </Button>\n            </Link>\n          </div>\n\n          {/* Empty State */}\n          {!currentConversationId && messages.length === 0 ? (\n            <EmptyState onSuggest={handleSuggestionClick} />\n          ) : (\n            <>\n              {/* Funnel Diagram (only in funnel mode & when code exists) */}\n              {mode === \"funnel-mapping\" && funnelMermaid && (\n                <div className=\"px-6 pt-4\">\n                  <FunnelDiagram code={funnelMermaid} />\n                </div>\n              )}\n\n              {/* Messages */}\n              <div className=\"flex-1 overflow-y-auto p-6 space-y-6\">\n                {messages.map((message: any) => {\n                  const content = getMessageText(message);\n\n                  return (\n                    <div\n                      key={message.id}\n                      className={`flex gap-4 ${\n                        message.role === \"user\" ? \"justify-end\" : \"justify-start\"\n                      }`}\n                    >\n                      {message.role === \"assistant\" && (\n                        <div className=\"h-8 w-8 rounded-lg bg-brandBlue/30 flex items-center justify-center border border-brandBlue/60\">\n                          <Sparkles className=\"h-5 w-5 text-brandBlueLight\" />\n                        </div>\n                      )}\n\n                      <div\n                        className={`max-w-3xl rounded-2xl px-6 py-4 shadow-md whitespace-pre-wrap break-words ${\n                          message.role === \"user\"\n                            ? \"bg-brandOrange text-white rounded-br-none\"\n                            : \"bg-brandNavyDark border border-brandBlue text-brandBlueLight rounded-bl-none\"\n                        }`}\n                      >\n                        <div className=\"prose prose-invert max-w-none leading-relaxed text-sm\">\n                          <ReactMarkdown remarkPlugins={[remarkGfm]}>\n                            {content}\n                          </ReactMarkdown>\n                        </div>\n                      </div>\n                    </div>\n                  );\n                })}\n\n                {isLoading && <TypingIndicator />}\n                <div ref={messageEndRef} />\n              </div>\n\n              {/* Input */}\n              <MessageInput\n                input={input}\n                setInput={setInput}\n                textareaRef={textareaRef}\n                file={file}\n                setFile={setFile}\n                uploading={uploading}\n                isLoading={isLoading}\n                limitReached={limitReached}\n                localError={localError}\n                chatError={chatError}\n                onSubmit={onSubmit}\n                mode={mode}\n                ctaScore={ctaScore}\n              />\n            </>\n          )}\n        </Card>\n      </div>\n    </div>\n  );\n}\n\n// Empty State Component\nfunction EmptyState({ onSuggest }: { onSuggest: (text: string) => void }) {\n  return (\n    <div className=\"flex-1 flex items-center justify-center p-8\">\n      <div className=\"text-center max-w-2xl\">\n        <div className=\"h-20 w-20 rounded-2xl bg-brandBlue/30 flex items-center justify-center mx-auto mb-6 border border-brandBlue/60\">\n          <Sparkles className=\"h-10 w-10 text-brandBlueLight\" />\n        </div>\n        <h2 className=\"text-3xl font-bold text-brandBlueLight mb-4\">\n          Your AI Entrepreneurial Mentor\n        </h2>\n        <p className=\"text-lg text-brandBlueLight/80 mb-8 leading-relaxed\">\n          Get personalized guidance, strategic advice, and support tailored to your journey.\n        </p>\n\n        <div className=\"grid gap-3 text-left\">\n          <SuggestionCard\n            text=\"Help me validate my business idea\"\n            onClick={() => onSuggest(\"Help me validate my business idea\")}\n          />\n          <SuggestionCard\n            text=\"What are the first steps I should take?\"\n            onClick={() => onSuggest(\"What are the first steps I should take?\")}\n          />\n          <SuggestionCard\n            text=\"How do I create a business plan?\"\n            onClick={() => onSuggest(\"How do I create a business plan?\")}\n          />\n        </div>\n      </div>\n    </div>\n  );\n}\n\n// Message Input Component\nfunction MessageInput({\n  input,\n  setInput,\n  textareaRef,\n  file,\n  setFile,\n  uploading,\n  isLoading,\n  limitReached,\n  localError,\n  chatError,\n  onSubmit,\n  mode,\n  ctaScore,\n}: any) {\n  const getPlaceholder = () => {\n    if (limitReached) {\n      return \"Daily message limit reached — upgrade to continue\";\n    }\n\n    switch (mode as ModeOption) {\n      case \"website-coach\":\n        return \"Ask Website Coach to review your site, sections, or flows (e.g. 'Audit my homepage hero' or 'Help me clarify my offer').\";\n      case \"seo-ux\":\n        return \"Ask for SEO/UX insights (e.g. 'Score my homepage for SEO/UX' or 'Help me improve my meta description and headings').\";\n      case \"funnel-mapping\":\n        return \"Describe your funnel (e.g. 'TikTok ad → Landing page → Email opt-in → Webinar → Sales call').\";\n      case \"cta-analyzer\":\n        return \"Paste your CTA or key section and ask for analysis (e.g. 'Analyze this CTA' or 'Give me 3 stronger versions').\";\n      case \"mentor\":\n      default:\n        return \"Ask your AI mentor anything about your business, strategy, or next steps...\";\n    }\n  };\n\n  const handleStyleClick = (style: string) => {\n    const basePrompt =\n      \"Rewrite this CTA using the following style: \" + style + \". Keep it high-converting and aligned with my offer.\";\n    if (!input.trim()) {\n      setInput(basePrompt + \"\\n\\n[Paste your CTA here]\");\n    } else {\n      setInput((prev: string) => prev + \"\\n\\n\" + basePrompt);\n    }\n  };\n\n  const badgeClass = (value: number) => {\n    if (value >= 80) return \"bg-emerald-600/30 text-emerald-200 border-emerald-500/60\";\n    if (value >= 60) return \"bg-amber-600/20 text-amber-200 border-amber-500/60\";\n    return \"bg-rose-700/20 text-rose-200 border-rose-500/60\";\n  };\n\n  return (\n    <div className=\"border-t border-brandBlue/50 p-4 bg-brandNavyDark\">\n      {/* CTA Scorecard (only in CTA mode and when score exists) */}\n      {mode === \"cta-analyzer\" && ctaScore && (\n        <div className=\"mb-3 p-3 rounded-xl bg-brandNavy border border-brandBlue/60 shadow-inner\">\n          <div className=\"flex items-center justify-between mb-2\">\n            <h3 className=\"text-sm font-semibold text-brandBlueLight\">\n              CTA Scorecard\n            </h3>\n            <span className=\"text-[10px] uppercase tracking-wide text-brandBlueLight/60\">\n              Conversion Snapshot\n            </span>\n          </div>\n          <div className=\"grid grid-cols-2 md:grid-cols-5 gap-2 mb-2 text-xs\">\n            <div className={`px-2 py-1 rounded-lg border ${badgeClass(ctaScore.clarity)}`}>\n              <div className=\"font-medium\">Clarity</div>\n              <div className=\"text-[11px] opacity-80\">{ctaScore.clarity}/100</div>\n            </div>\n            <div className={`px-2 py-1 rounded-lg border ${badgeClass(ctaScore.emotion)}`}>\n              <div className=\"font-medium\">Emotion</div>\n              <div className=\"text-[11px] opacity-80\">{ctaScore.emotion}/100</div>\n            </div>\n            <div className={`px-2 py-1 rounded-lg border ${badgeClass(ctaScore.strength)}`}>\n              <div className=\"font-medium\">Action Strength</div>\n              <div className=\"text-[11px] opacity-80\">{ctaScore.strength}/100</div>\n            </div>\n            <div className={`px-2 py-1 rounded-lg border ${badgeClass(ctaScore.urgency)}`}>\n              <div className=\"font-medium\">Urgency</div>\n              <div className=\"text-[11px] opacity-80\">{ctaScore.urgency}/100</div>\n            </div>\n            <div className={`px-2 py-1 rounded-lg border ${badgeClass(ctaScore.conversion)}`}>\n              <div className=\"font-medium\">Conversion Likelihood</div>\n              <div className=\"text-[11px] opacity-80\">{ctaScore.conversion}/100</div>\n            </div>\n          </div>\n          {ctaScore.summary && (\n            <p className=\"text-[11px] text-brandBlueLight/80 leading-snug\">\n              {ctaScore.summary}\n            </p>\n          )}\n        </div>\n      )}\n\n      {mode === \"cta-analyzer\" && (\n        <div className=\"mb-3 flex flex-wrap gap-2 text-[11px]\">\n          <span className=\"text-brandBlueLight/60 mr-1 self-center\">\n            Quick styles:\n          </span>\n          <button\n            type=\"button\"\n            onClick={() => handleStyleClick(\"bold, direct, high-energy\")}\n            className=\"px-2 py-1 rounded-full bg-brandNavy border border-brandBlue/60 text-brandBlueLight hover:border-brandOrangeLight hover:text-brandOrangeLight transition\"\n          >\n            Bold Power CTA\n          </button>\n          <button\n            type=\"button\"\n            onClick={() => handleStyleClick(\"warm, friendly, reassuring\")}\n            className=\"px-2 py-1 rounded-full bg-brandNavy border border-brandBlue/60 text-brandBlueLight hover:border-brandOrangeLight hover:text-brandOrangeLight transition\"\n          >\n            Warm & Friendly\n          </button>\n          <button\n            type=\"button\"\n            onClick={() => handleStyleClick(\"luxury, premium, high-end\")}\n            className=\"px-2 py-1 rounded-full bg-brandNavy border border-brandBlue/60 text-brandBlueLight hover:border-brandOrangeLight hover:text-brandOrangeLight transition\"\n          >\n            Luxury Tone\n          </button>\n          <button\n            type=\"button\"\n            onClick={() => handleStyleClick(\"urgent, scarcity-driven, time-limited\")}\n            className=\"px-2 py-1 rounded-full bg-brandNavy border border-brandBlue/60 text-brandBlueLight hover:border-brandOrangeLight hover:text-brandOrangeLight transition\"\n          >\n            Urgency Boost\n          </button>\n          <button\n            type=\"button\"\n            onClick={() => handleStyleClick(\"short, punchy, minimal words\")}\n            className=\"px-2 py-1 rounded-full bg-brandNavy border border-brandBlue/60 text-brandBlueLight hover:border-brandOrangeLight hover:text-brandOrangeLight transition\"\n          >\n            Short & Punchy\n          </button>\n          <button\n            type=\"button\"\n            onClick={() => handleStyleClick(\"long-form, narrative, benefit-rich\")}\n            className=\"px-2 py-1 rounded-full bg-brandNavy border border-brandBlue/60 text-brandBlueLight hover:border-brandOrangeLight hover:text-brandOrangeLight transition\"\n          >\n            Long-Form CTA\n          </button>\n        </div>\n      )}\n\n      {limitReached && (\n        <div className=\"mb-3 p-3 bg-brandOrange/20 border border-brandOrange/40 rounded-lg text-brandOrangeLight text-sm text-center shadow-sm\">\n          You've reached your free daily message limit — upgrade for unlimited access.\n        </div>\n      )}\n\n      {chatError && (\n        <div className=\"mb-2 p-2 bg-red-500/20 border border-red-500/50 rounded text-red-200 text-xs\">\n          Error: {chatError.message}\n        </div>\n      )}\n\n      {localError && (\n        <div className=\"mb-2 p-2 bg-red-500/20 border border-red-500/50 rounded text-red-200 text-xs\">\n          {localError}\n        </div>\n      )}\n\n      <form onSubmit={onSubmit} className=\"flex flex-col gap-3\">\n        {/* File Attach */}\n        <div className=\"flex items-center gap-2\">\n          <label className=\"inline-flex items-center gap-2 px-3 py-2 rounded-xl bg-brandNavy border border-brandBlue text-sm cursor-pointer hover:border-brandBlueLight transition\">\n            <input\n              type=\"file\"\n              className=\"hidden\"\n              onChange={(e) => setFile(e.target.files?.[0] || null)}\n              disabled={uploading || isLoading || limitReached}\n            />\n            <Plus className=\"h-4 w-4 text-brandBlueLight\" />\n            <span className=\"text-brandBlueLight\">Attach</span>\n          </label>\n\n          {file && (\n            <div className=\"flex items-center gap-2 px-3 py-2 rounded-xl bg-brandNavy/80 border border-brandBlue text-xs text-brandBlueLight\">\n              <span className=\"truncate max-w-[200px]\">{file.name}</span>\n              <button\n                type=\"button\"\n                className=\"text-brandOrangeLight hover:underline\"\n                onClick={() => setFile(null)}\n              >\n                Remove\n              </button>\n            </div>\n          )}\n\n          {uploading && (\n            <span className=\"text-xs text-brandBlueLight/80\">Uploading...</span>\n          )}\n        </div>\n\n        {/* Textarea + Send */}\n        <div className=\"flex gap-3 items-end\">\n          <textarea\n            ref={textareaRef}\n            value={input}\n            onChange={(e) => setInput(e.target.value)}\n            placeholder={getPlaceholder()}\n            rows={1}\n            className=\"flex-1 bg-brandNavy border border-brandBlue text-white rounded-xl px-4 py-3 \n            resize-none overflow-hidden focus:outline-none focus:border-brandOrangeLight \n            focus:ring-2 focus:ring-brandOrangeLight/40 shadow-inner shadow-brandNavy/40 \n            placeholder:text-brandBlueLight/50 transition-all duration-200\"\n            disabled={isLoading || uploading || limitReached}\n          />\n\n          <Button\n            type=\"submit\"\n            disabled={\n              isLoading ||\n              uploading ||\n              limitReached ||\n              (!input.trim() && !file)\n            }\n            className={`rounded-xl px-5 py-3 flex items-center gap-2 ${\n              limitReached\n                ? \"bg-brandBlue/40 text-brandBlueLight cursor-not-allowed\"\n                : \"bg-brandOrange hover:bg-brandOrangeLight text-white\"\n            }`}\n          >\n            <Send className=\"h-4 w-4\" />\n          </Button>\n        </div>\n      </form>\n    </div>\n  );\n}\n\n// Mermaid Funnel Diagram component\nfunction FunnelDiagram({ code }: { code: string }) {\n  const ref = useRef<HTMLDivElement | null>(null);\n\n  useEffect(() => {\n    if (!ref.current) return;\n\n    const renderDiagram = async () => {\n      try {\n        mermaid.initialize({\n          startOnLoad: false,\n          securityLevel: \"loose\",\n          theme: \"dark\",\n        });\n\n        const id = \"funnel-diagram-\" + Date.now().toString();\n\n        // Modern Mermaid: returns a Promise<{ svg, bindFunctions }>\n        const { svg } = await mermaid.render(id, code);\n\n        if (ref.current) {\n          ref.current.innerHTML = svg;\n        }\n      } catch (err) {\n        console.error(\"Mermaid render error:\", err);\n      }\n    };\n\n    renderDiagram();\n  }, [code]);\n\n  return (\n    <div className=\"rounded-xl border border-brandBlue/60 bg-brandNavyDark/80 p-3 shadow-inner overflow-x-auto\">\n      <div className=\"text-xs text-brandBlueLight/60 mb-2\">\n        Funnel Diagram\n      </div>\n      <div ref={ref} className=\"min-w-[320px]\" />\n    </div>\n  );\n}\n\nfunction SuggestionCard({\n  text,\n  onClick,\n}: {\n  text: string;\n  onClick: () => void;\n}) {\n  return (\n    <button\n      type=\"button\"\n      onClick={onClick}\n      className=\"p-4 bg-brandNavyDark hover:bg-brandNavy border border-brandBlue/60 hover:border-brandOrange rounded-lg text-left transition-all\"\n    >\n      <p className=\"text-brandBlueLight/90\">{text}</p>\n    </button>\n  );\n}\n\n\n"],"names":[],"mappings":"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"}}]
}